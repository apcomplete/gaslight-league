<% # <Casual Ruby-ing because I'm a monster
  catch_ranking = data.trainers.trainer.sort_by {|a| [-(a.comp_stats.num_caught - a.initial_stats.num_caught)]}
  km_ranking = data.trainers.trainer.sort_by {|a| [-(a.comp_stats.km_walked - a.initial_stats.km_walked)]}
  battle_ranking = data.trainers.trainer.sort_by {|a| [-(a.comp_stats.battles_won - a.initial_stats.battles_won)]}
  magikarp_ranking = data.trainers.trainer.sort_by {|a| [-(a.comp_stats.magikarp_candy - a.initial_stats.magikarp_candy)]}
  lure_ranking = data.trainers.trainer.sort_by {|a| [-(a.comp_stats.lure_modules - a.initial_stats.lure_modules)]}
  egg_ranking = data.trainers.trainer.sort_by {|a| [-(a.comp_stats.eggs_hatched - a.initial_stats.eggs_hatched)]}
%>
<!-- End Casual Rubying -->

<section id="categories">
 <div class="container">
   <div class="col-xs-12">
     <h2>Categories</h2>
     <p>Here's some copy talking about the contest and how it works, ey-yoooo&mdash;</p>
   </div>

   <div class="category__wrapper">
     <section class="category col-md-4 col-sm-12" id="category-community_organizer">
       <div class="container">
         <div class="col-xs-12">
           <h3 class="category__title">Community Organizer</h3>
           <p class="category__description">Set down the most Lure Modules at the Pok&eacute;stop nearest Gaslight's office</p>
           <ul>
           <% lure_ranking.each do |trainer| %>
               <li><%= trainer.name %> <%= trainer.comp_stats.lure_modules - trainer.initial_stats.lure_modules %> (<%= trainer.handle %>)</li>
           <% end %>
           </ul>
           <div class="container">
             <p>
               This defines the default behaviour for how flex items are laid out along.
             </p>
           </div>
         </div>
       </div>
     </section>

     <section class="category col-md-4 col-sm-12" id="category-collector">
       <div class="container">
         <div class="col-xs-12">
           <h3 class="category__title">Collector</h3>
           <p class="category__description">Has the highest number of Pok&eacute;mon in their Pok&eacute;dex</p>
           <ul>
           <% catch_ranking.each do |trainer| %>
               <li><%= trainer.name %> <%= trainer.comp_stats.num_caught - trainer.initial_stats.num_caught %> (<%= trainer.handle %>)</li>
           <% end %>
           </ul>
         </div>
       </div>
     </section>

     <section class="category col-md-4 col-sm-12" id="category-distance">
       <div class="container">
         <div class="col-xs-12">
           <h3 class="category__title">Going the Distance</h3>
           <p class="category__description">Has the most walking clocked to their Pokemon Go app</p>
           <ul>
           <% km_ranking.each do |trainer| %>
               <li><%= trainer.name %> <%= trainer.comp_stats.km_walked - trainer.initial_stats.km_walked %> (<%= trainer.handle %>)</li>
           <% end %>
           </ul>
         </div>
       </div>
     </section>

   </div>
   <div class="category__wrapper">
     <section class="category col-md-4 col-sm-12" id="category-magikarp">
       <div class="container">
         <div class="col-xs-12">
           <h3 class="category__title">More Fish in the Sea</h3>
           <p class="category__description">Has the highest number of Magikarp candies (you'll get to Gyarados eventually)</p>
           <ul>
           <% magikarp_ranking.each do |trainer| %>
               <li><%= trainer.name %> <%= trainer.comp_stats.magikarp_candy - trainer.initial_stats.magikarp_candy %> (<%= trainer.handle %>)</li>
           <% end %>
           </ul>
         </div>
       </div>
     </section>


     <section class="category col-md-4 col-sm-12" id="category-eggs">
       <div class="container">
         <div class="col-xs-12">
           <h3 class="category__title">Gotta Hatch 'Em All</h3>
           <p class="category__description">Has hatched the most eggs</p>
           <ul>
           <% egg_ranking.each do |trainer| %>
               <li><%= trainer.name %> <%= trainer.comp_stats.eggs_hatched - trainer.initial_stats.eggs_hatched %> (<%= trainer.handle %>)</li>
           <% end %>
           </ul>
         </div>
       </div>
     </section>

     <section class="category col-md-4 col-sm-12" id="category-gyms">
       <div class="container">
         <div class="col-xs-12">
           <h3 class="category__title">Gym Rat</h3>
           <p class="category__description">Has won battles and trained the most times in a gym</p>
           <ul>
           <% battle_ranking.each do |trainer| %>
               <li><%= trainer.name %> <%= trainer.comp_stats.battles_won - trainer.initial_stats.battles_won %> (<%= trainer.handle %>)</li>
           <% end %>
           </ul>
         </div>
       </div>
     </section>
   </div>
 </div>
</section>
